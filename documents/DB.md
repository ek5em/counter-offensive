# База данных
## Оглавление
### [База данных](#база-данных)
### [Оглавление](#оглавление)
### [Docker Desktop](#docker-desktop)
### [Подключение через браузер](#browser-connection)
### [Подключение через сторонние приложения](#other-connection)
### [Таблицы](#tables)
- [game](#table-game)
- [users](#table-users)
- [gamers](#table-gamers)
- [persons](#table-persons)
- [ranks](#table-ranks)
- [games](#table-games)
- [messages](#table-messages)
### [Разработка](#dev)

<a name="docker-desktop"></a>
## Docker Desktop
Контейнер называется database (*counteroffensive-database*)

<a name="browser-connection"></a>
## Подключение через браузер
<a href="http://localhost:8081/" target="_blank">http://localhost:8081/</a>(Подключение через PMA)
![Пример подключения через PMA](images/pma/browser-view-example.jpg)

<a name="other-connection"></a>
## Подключение через сторонние приложения
|             |                                        |
| ----------- | -------------------------------------- |
| Логин       | *admin*                                |
| Пароль      | *b446b342-608c-11ee-8c99-0242ac120002* |
| Хост        | *localhost*                            |
| Порт        | *3306*                                 |
| База данных | *contrnasup*                           |

<a name="tables"></a>
## Таблицы

<table>
    <tr><td colspan=3 align="center">users (Список пользователей)</td></tr>
    <tr><td>Колонка</td><td>Тип данных</td><td>Описание</td></tr>
    <tr><td>Вопрос</td><td>Ответ</td><td>Задание</td></tr>
</table>

<a name="table-game"></a>

## Таблица game
| Название столбца | Тип данных   | Описание                                             | Стандартное значение |
| ---------------- | ------------ | ---------------------------------------------------- | -------------------- |
| id               | MEDIUMINT    | Уникальный идентификатор игры, автоинкрементируемый. | -                    |
| hashUnits        | VARCHAR(100) | Хеш-значение юнитов игры, не может быть пустым.      |                      |
| hashScene        | VARCHAR(100) | Хеш-значение сцены игры, не может быть пустым.       |                      |
| hashBullets      | VARCHAR(100) | Хеш-значение пуль игры, не может быть пустым.        |                      |
| hashLobby        | VARCHAR(100) | Хеш-значение лобби игры, не может быть пустым.       |                      |

<a name="table-users"></a>

## Таблица users
| Название столбца | Тип данных   | Описание                                                     | Стандартное значение  |
| ---------------- | ------------ | ------------------------------------------------------------ | --------------------- |
| id               | MEDIUMINT    | Уникальный идентификатор пользователя, автоинкрементируемый. | -                     |
| login            | VARCHAR(20)  | Логин пользователя, не может быть пустым.                    |                       |
| password         | VARCHAR(100) | Пароль пользователя, не может быть пустым.                   |                       |
| token            | VARCHAR(100) | Токен пользователя, не может быть пустым.                    |                       |
| tokenLastUse     | DATETIME     | Дата и время последнего использования токена                 | "2000-10-01 00:00:00" |
| timeCreate       | DATETIME     | Дата и время создания пользователя                           | "2000-10-01 00:00:00" |
| photo            | VARCHAR(100) | Фотография пользователя                                      | "default.jpg"         |

<a name="table-gamers"></a>

## Таблица gamers
| Название столбца | Тип данных  | Описание                                               | Стандартное значение |
| ---------------- | ----------- | ------------------------------------------------------ | -------------------- |
| id               | MEDIUMINT   | Уникальный идентификатор игрока, автоинкрементируемый. | -                    |
| user_id          | MEDIUMINT   | Идентификатор пользователя, связанный с данным игроком | -1                   |
| person_id        | MEDIUMINT   | Идентификатор персонажа, связанный с данным игроком    | -1                   |
| experience       | INT         | Опыт игрока                                            | 0                    |
| hp               | INT         | Очки здоровья игрока                                   | 0                    |
| money            | INT         | Денежные средства игрока                               | 0                    |
| x                | FLOAT       | Координата X игрока. Может быть NULL.                  | NULL                 |
| y                | FLOAT       | Координата Y игрока. Может быть NULL.                  | NULL                 |
| angle            | FLOAT       | Угол поворота игрока. Может быть NULL.                 | NULL                 |
| status           | VARCHAR(32) | Статус игрока, не может быть пустым.                   |                      |

<a name="table-persons"></a>

## Таблица persons
| Название столбца | Тип данных   | Описание                                                  | Стандартное значение |
| ---------------- | ------------ | --------------------------------------------------------- | -------------------- |
| id               | MEDIUMINT    | Уникальный идентификатор персонажа, автоинкрементируемый. | -                    |
| name             | VARCHAR(100) | Название персонажа                                        | Пехотинец            |
| hp               | INT          | Очки здоровья персонажа                                   | 0                    |
| image            | VARCHAR(100) | Изображение персонажа                                     | standartPerson.jpg   |
| reloadSpeed      | FLOAT        | Скорость перезарядки персонажа                            | 1                    |
| movementSpeed    | FLOAT        | Скорость передвижения персонажа                           | 1                    |
| rotateSpeed      | FLOAT        | Скорость поворота персонажа                               | 1                    |
| level            | INT          | Уровень персонажа                                         | 1                    |

<a name="table-ranks"></a>

## Таблица ranks
| Название столбца | Тип данных   | Описание                                              | Стандартное значение |
| ---------------- | ------------ | ----------------------------------------------------- | -------------------- |
| id               | MEDIUMINT    | Уникальный идентификатор ранга, автоинкрементируемый. | -                    |
| name             | VARCHAR(100) | Название ранга                                        | "Медный ранг"        |
| experience       | INT          | Опыт, необходимый для достижения данного ранга        | 0                    |

<a name="table-games"></a>

## Таблица games
| Название столбца | Тип данных   | Описание                                             | Стандартное значение |
| ---------------- | ------------ | ---------------------------------------------------- | -------------------- |
| id               | MEDIUMINT    | Уникальный идентификатор игры, автоинкрементируемый. | -                    |
| users            | VARCHAR(100) | JSON-строка, содержащая информацию о пользователях   | []                   |
| usersCount       | INT          | Количество пользователей.                            | 0                    |
| startTime        | DATETIME     | Дата и время начала игры                             | 2000-10-01 00:00:00  |
| endTime          | DATETIME     | Дата и время окончания игры                          | 2000-10-01 00:00     |

<a name="table-messages"></a>

## Таблица messages
| Название столбца | Тип данных   | Описание                                                  | Стандартное значение |
| ---------------- | ------------ | --------------------------------------------------------- | -------------------- |
| id               | MEDIUMINT    | Уникальный идентификатор сообщения, автоинкрементируемый. | -                    |
| userId           | MEDUIMINT    | Уникальный идентификатор отправителя                      | -1                   |
| text             | VARCHAR(100) | Содержание сообщения                                      | -                    |
| sendTime         | DATETIME     | Время отправки сообщения                                  | 2000-10-01 00:00     |

<a name="dev"></a>

## Разработка
+ Все данные хранятся в папке db
+ Папка db создаётся автоматически при запуске контейнера
+ Чтобы очистить БД нужно остановить контейнер, удалить папку db и запустить контейнер
+ К БД может подключиться только API (PMA не учитывается т.к. это менеджер БД)